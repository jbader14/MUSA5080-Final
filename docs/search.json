[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "MUSA 5080 Final Project",
    "section": "",
    "text": "Project Overview:\n\nMembers: Jack Bader, Joey Cahill, Sam Sen,\nDate: December 8th, 2025"
  },
  {
    "objectID": "appendix/appendix.html",
    "href": "appendix/appendix.html",
    "title": "Technical Appendix",
    "section": "",
    "text": "Code\n# Core tidyverse\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(lubridate)\n\n# Spatial data\nlibrary(sf)\nlibrary(tigris)\n\n# Census data\nlibrary(tidycensus)\n\n# Weather data\nlibrary(riem)  # For Philadelphia weather from ASOS stations\n\n# Visualization\nlibrary(viridis)\nlibrary(grid)\nlibrary(gridExtra)\nlibrary(knitr)\nlibrary(kableExtra)\n\nlibrary(ggplot2)\nlibrary(scales)\n\n# here!\nlibrary(here)\n\n# Extra\nlibrary(tidytext)\n\n# Get rid of scientific notation. We gotta look good!\noptions(scipen = 999)\n\n\n\n\n\n\n\nCode\nkey &lt;- Sys.getenv(\"CENSUS_API_KEY\")\ncensus_api_key(key)"
  },
  {
    "objectID": "appendix/appendix.html#load-libraries",
    "href": "appendix/appendix.html#load-libraries",
    "title": "Technical Appendix",
    "section": "",
    "text": "Code\n# Core tidyverse\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(lubridate)\n\n# Spatial data\nlibrary(sf)\nlibrary(tigris)\n\n# Census data\nlibrary(tidycensus)\n\n# Weather data\nlibrary(riem)  # For Philadelphia weather from ASOS stations\n\n# Visualization\nlibrary(viridis)\nlibrary(grid)\nlibrary(gridExtra)\nlibrary(knitr)\nlibrary(kableExtra)\n\nlibrary(ggplot2)\nlibrary(scales)\n\n# here!\nlibrary(here)\n\n# Extra\nlibrary(tidytext)\n\n# Get rid of scientific notation. We gotta look good!\noptions(scipen = 999)"
  },
  {
    "objectID": "appendix/appendix.html#define-themes",
    "href": "appendix/appendix.html#define-themes",
    "title": "Technical Appendix",
    "section": "",
    "text": "Code\nplotTheme &lt;- theme(\n  plot.title = element_text(size = 14, face = \"bold\"),\n  plot.subtitle = element_text(size = 10),\n  plot.caption = element_text(size = 8),\n  axis.text.x = element_text(size = 10, angle = 45, hjust = 1),\n  axis.text.y = element_text(size = 10),\n  axis.title = element_text(size = 11, face = \"bold\"),\n  panel.background = element_blank(),\n  panel.grid.major = element_line(colour = \"#D0D0D0\", size = 0.2),\n  panel.grid.minor = element_blank(),\n  axis.ticks = element_blank(),\n  legend.position = \"right\"\n)\n\nmapTheme &lt;- theme(\n  plot.title = element_text(size = 14, face = \"bold\"),\n  plot.subtitle = element_text(size = 10),\n  plot.caption = element_text(size = 8),\n  axis.line = element_blank(),\n  axis.text = element_blank(),\n  axis.ticks = element_blank(),\n  axis.title = element_blank(),\n  panel.background = element_blank(),\n  panel.border = element_blank(),\n  panel.grid.major = element_line(colour = 'transparent'),\n  panel.grid.minor = element_blank(),\n  legend.position = \"right\",\n  plot.margin = margin(1, 1, 1, 1, 'cm'),\n  legend.key.height = unit(1, \"cm\"),\n  legend.key.width = unit(0.2, \"cm\")\n)\n\npalette5 &lt;- c(\"#eff3ff\", \"#bdd7e7\", \"#6baed6\", \"#3182bd\", \"#08519c\")"
  },
  {
    "objectID": "appendix/appendix.html#set-census-api-key",
    "href": "appendix/appendix.html#set-census-api-key",
    "title": "Technical Appendix",
    "section": "",
    "text": "Code\nkey &lt;- Sys.getenv(\"CENSUS_API_KEY\")\ncensus_api_key(key)"
  },
  {
    "objectID": "appendix/appendix.html#monthly-average-daily-ridership-by-transit-mode",
    "href": "appendix/appendix.html#monthly-average-daily-ridership-by-transit-mode",
    "title": "Technical Appendix",
    "section": "Monthly Average Daily Ridership by Transit Mode",
    "text": "Monthly Average Daily Ridership by Transit Mode\n\n\nCode\n# Engineer a date feature for plotting\ntransit_mode_monthly &lt;- transit_mode |&gt;\n  mutate(\n    date = ymd(paste(Calendar_Year, Calendar_Month, \"01\", sep = \"-\"))\n  )\n\n# Plot line chart with a line for each transit mode over time\nggplot(transit_mode_monthly,\n       aes(x = date,\n           y = Average_Daily_Ridership,\n           color = Mode)) +\n  geom_line(linewidth = 1) +\n  labs(\n    title = \"Monthly Average Daily Ridership by Transit Mode\",\n    subtitle = \"SEPTA in Philadelphia from 2019 - 2025\",\n    x = \"Date\",\n    y = \"Average Daily Ridership\",\n    color = \"Transit Mode\"\n  ) +\n  theme_minimal()"
  },
  {
    "objectID": "appendix/appendix.html#total-bus-ridership-by-day-of-week-philadelphia-census-tracts",
    "href": "appendix/appendix.html#total-bus-ridership-by-day-of-week-philadelphia-census-tracts",
    "title": "Technical Appendix",
    "section": "Total Bus Ridership by Day of Week, Philadelphia Census Tracts",
    "text": "Total Bus Ridership by Day of Week, Philadelphia Census Tracts\n\n\nCode\n# Filter to Philadelphia County and clean fields\nbus_tract_phila &lt;- bus_tract %&gt;%\n  filter(County_Name == \"Philadelphia County\") %&gt;%\n  mutate(\n    year = as.integer(stringr::str_extract(Season, \"\\\\d{4}\")),\n    total_ridership = On_ + Off_\n  )\n\n# Aggregate to total ridership by year and day-of-week\nbus_tract_year_dow &lt;- bus_tract_phila %&gt;%\n  group_by(year, Day_of_Week) %&gt;%\n  summarise(\n    total_ridership = sum(total_ridership, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\n# Minimal line plot of total ridership over time by day-of-week\nggplot(bus_tract_year_dow,\n       aes(x = year, y = total_ridership, color = Day_of_Week)) +\n  geom_line(linewidth = 0.9) +\n  geom_point(size = 1.8) +\n  labs(\n    title = \"Total SEPTA Bus Ridership by Day of Week\",\n    subtitle = \"Average daily boardings + departures for Fall only\",\n    x = \"Year\",\n    y = \"Total Average Daily Ridership\",\n    color = \"Day of Week\"\n  ) +\n  theme_minimal()"
  },
  {
    "objectID": "appendix/appendix.html#total-septa-bus-ridership-by-day-of-week",
    "href": "appendix/appendix.html#total-septa-bus-ridership-by-day-of-week",
    "title": "Technical Appendix",
    "section": "Total SEPTA Bus Ridership by Day of Week",
    "text": "Total SEPTA Bus Ridership by Day of Week\n\n\nCode\n# Aggregate to total ridership by year and day-of-week\nbus_tract_year_dow &lt;- bus_tract_phila |&gt;\n  group_by(year, Day_of_Week) |&gt;\n  summarise(\n    total_ridership = sum(total_ridership, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\n# Minimal line plot of total ridership over time by day-of-week\nggplot(bus_tract_year_dow,\n       aes(x = year, y = total_ridership, color = Day_of_Week)) +\n  geom_line(linewidth = 0.9) +\n  geom_point(size = 1.8) +\n  labs(\n    title = \"Total SEPTA Bus Ridership by Day of Week\",\n    subtitle = \"Average daily boardings + departures for Fall only\",\n    x = \"Year\",\n    y = \"Total Average Daily Ridership\",\n    color = \"Day of Week\"\n  ) +\n  theme_minimal()"
  },
  {
    "objectID": "appendix/appendix.html#pre-vs.-post-covid-ridership-comparison",
    "href": "appendix/appendix.html#pre-vs.-post-covid-ridership-comparison",
    "title": "Technical Appendix",
    "section": "Pre vs. Post COVID Ridership Comparison",
    "text": "Pre vs. Post COVID Ridership Comparison\n\n\nCode\n# Aggregate to one row per tract-year\ntract_19_21 &lt;- bus_tract_phila |&gt;\n  filter(\n    year %in% c(2019, 2021)\n  ) |&gt;\n  group_by(Census_Tract_ID, year) |&gt;\n  summarise(\n    total_ridership = sum(total_ridership, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  # Pivot to wide format for plotting\n  pivot_wider(\n    names_from = year,\n    values_from = total_ridership,\n    names_prefix = \"y\"\n  ) |&gt;\n  # Drop tracts with missing data\n  tidyr::drop_na(y2019, y2021)\n\n# Plot 2019 vs 2021 ridership scatterplot\nggplot(tract_19_21,\n       aes(x = y2019, y = y2021)) +\n  geom_point(alpha = 0.6) +\n  geom_abline(slope = 1, intercept = 0, linetype = \"dashed\") +\n  labs(\n    title = \"Tract-Level Weekday Ridership: 2019 vs 2021\",\n    subtitle = \"Each point represents a census tract in Philadelphia County\",\n    x = \"2019 Ridership\",\n    y = \"2021 Ridership\"\n  ) +\n  theme_minimal()"
  },
  {
    "objectID": "appendix/appendix.html#tract-level-total-ridership-fall-2023",
    "href": "appendix/appendix.html#tract-level-total-ridership-fall-2023",
    "title": "Technical Appendix",
    "section": "Tract-Level Total Ridership (Fall 2023)",
    "text": "Tract-Level Total Ridership (Fall 2023)\n\n\nCode\n# Tract-level total ridership, Fall 2023\ntract_2023 &lt;- bus_tract_phila |&gt;\n  filter(year == 2023) |&gt;\n  group_by(Census_Tract_ID) |&gt;\n  summarise(\n    total_ridership = sum(total_ridership, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  filter(!is.na(total_ridership), total_ridership &gt; 0) |&gt;\n  # Quintiles to view meaningful patterns in plot\n  mutate(\n    ridership_q = cut_number(\n      total_ridership,\n      n = 5,\n      labels = c(\"Lowest 20%\", \"20–40%\", \"40–60%\", \"60–80%\", \"Top 20%\")\n    )\n  )\n\n# Join to tract geometries\ntract_map_2023 &lt;- tracts_sf |&gt;\n  mutate(GEOID = as.character(GEOID)) |&gt;\n  left_join(tract_2023, by = c(\"GEOID\" = \"Census_Tract_ID\"))\n\n# Plot quintiles of total ridership\nggplot(tract_map_2023) +\n  geom_sf(aes(fill = ridership_q), color = NA) +\n  scale_fill_brewer(\n    palette = \"YlGnBu\",\n    na.value = \"grey90\",\n    name = \"Quintile of\\nWeekday Ridership\"\n  ) +\n  labs(\n    title = \"Bus Ridership by Census Tract (Fall 2023)\",\n    subtitle = \"Tracts grouped into quintiles by total weekday boardings + deepartures\",\n  ) +\n  theme_minimal()"
  },
  {
    "objectID": "appendix/appendix.html#percent-change-in-tract-level-ridership-2021-2023",
    "href": "appendix/appendix.html#percent-change-in-tract-level-ridership-2021-2023",
    "title": "Technical Appendix",
    "section": "Percent Change in Tract-Level Ridership (2021-2023)",
    "text": "Percent Change in Tract-Level Ridership (2021-2023)\n\n\nCode\n# Tract-level 2019 & 2023 totals and percent change\ntract_change_21_23 &lt;- bus_tract_phila |&gt;\n  filter(\n    County_Name == \"Philadelphia County\",\n    Season %in% c(\"Fall 2021\", \"Fall 2023\"),\n    #Day_of_Week == \"Weekday\"\n  ) |&gt;\n  group_by(Census_Tract_ID, year) |&gt;\n  summarise(\n    total_ridership = sum(total_ridership, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  tidyr::pivot_wider(\n    names_from = year,\n    values_from = total_ridership,\n    names_prefix = \"y\"\n  ) |&gt;\n  # Needs data from both 2021 and 2023\n  filter(!is.na(y2021), !is.na(y2023), y2021 &gt; 0) |&gt;\n  mutate(\n    pct_change_21_23 = 100 * (y2023 - y2021) / y2021\n  )\n\n# Bracket into percentage bins for plotting\nbreaks &lt;- c(-Inf, -50, -25, -10, 10, 25, 50, Inf)\nlabels &lt;- c(\"≤ -50%\", \"-50% to -25%\", \"-25% to -10%\",\n            \"-10% to +10%\", \"+10% to +25%\", \"+25% to +50%\", \"≥ +50%\")\n\ntract_change_21_23 &lt;- tract_change_21_23 |&gt;\n  mutate(\n    pct_change_cat = cut(\n      pct_change_21_23,\n      breaks = breaks,\n      labels = labels,\n      include.lowest = TRUE,\n      ordered_result = TRUE\n    )\n  )\n\n# Join to tract geometries\ntract_map_change_21_23 &lt;- tracts_sf |&gt;\n  mutate(GEOID = as.character(GEOID)) |&gt;\n  left_join(tract_change_21_23, by = c(\"GEOID\" = \"Census_Tract_ID\"))\n\n# Plot map\nggplot(tract_map_change_21_23) +\n  geom_sf(aes(fill = pct_change_cat), color = NA) +\n  scale_fill_brewer(\n    palette = \"RdYlGn\",\n    na.value = \"grey90\",\n    name = \"% change\\n2021–2023\"\n  ) +\n  labs(\n    title = \"Percent Change in Bus Ridership by Census Tract\",\n    subtitle = \"From Fall 2021 - 2023; red = loss, green = gain\",\n    caption = \"Measures Post-COVID Recovery in SEPTA Usage\"\n  ) +\n  theme_minimal()"
  }
]